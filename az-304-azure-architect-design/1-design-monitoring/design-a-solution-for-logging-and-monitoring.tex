\subsectioncard{Designen einer Lösung für Logging und Überwachung}

\subsubsectioncard{determine levels and storage locations for logs}

\begin{flashcard}[Definition]{Azure Monitor}
  \vspace*{\stretch{1}}
  \begin{itemize}
    \item Service dealing with telemetry/information for from all services\newline (application, infrastructure, platform)
      \begin{itemize}
        \item collect
        \item analyze
        \item act with alerts and actions
        \item passing forward
      \end{itemize}
 
    \item collects:
      \begin{itemize}
        \item logs
        \item netrics
      \end{itemize}
  \end{itemize}
  \vspace*{\stretch{1}}
\end{flashcard}

\begin{flashcard}[Definition]{Storing Azure Monitor data}
  \vspace*{\stretch{1}}
  \begin{itemize}
    \item resource log (text): \emph{Azure Monitor Log Analytics workspaces}
    \item time-series numerical metrics: \emph{Azure Monitor Metrics}\newline
      $\Rightarrow$ Automatically collected for \emph{Azure Resources} (short period)!
    \item Data stored in Storage Account
  \end{itemize}
  \vspace*{\stretch{1}}
\end{flashcard}

\begin{flashcard}[Definition]{Alarme mit Azure Monitor}
  \vspace*{\stretch{1}}
  \begin{itemize}
    \item Alarmierungsregeln
      \begin{itemize}
        \item können Anfragen an Log Analytics-Workspace schicken
      \end{itemize}
    \item Aktionsgruppen
    \item 
  \end{itemize}
  \vspace*{\stretch{1}}
\end{flashcard}

\begin{flashcard}[Definition]{SQL DB auditing}
  \vspace*{\stretch{1}}
  \begin{itemize}
    \item Storage
      \begin{itemize}
        \item in der selben Region
        \item Append-Blobs
        \item[!] nicht: Premium-Speicher, hierarchischer Namespace
      \end{itemize}
    \item Event Hubs
      \begin{itemize}
        \item in der selben Region
      \end{itemize}
    \item Log Analytics
      \begin{itemize}
        \item worksapce kann überall sein
      \end{itemize}
  \end{itemize}
  \vspace*{\stretch{1}}
\end{flashcard}


\subsubsectioncard{plan for integration with monitoring tools including Azure Monitor and Azure Sentinel}

\begin{flashcard}[Definition]{Integration der Services}
  \vspace*{\stretch{1}}
  \begin{itemize}
    \item automatisches Monitoring für Ressourcen-Metriken
    \item Integration in Anwendungen über Instrumentierung\newline
      (ohne Source-Code adaptierung!)
    \item Installation von Log Analytics agent auf VMs (u.\,A. für Security)
    \item Installation von Metric Agent auf VMs (u.\,A. für Metriken)
    \item Aktivieren der Log-Verbindung z.B. zu Aktivitätsprotokoll
  \end{itemize}
  \vspace*{\stretch{1}}
\end{flashcard}

\begin{flashcard}[Definition]{Log Analytics Workspace}
  \vspace*{\stretch{1}}
  \begin{itemize}
    \item Centralized storage for all logging data/events in Azure Monitor
    \item Can be per subscription (Team), or for the whole Azure account
    \item Log events stored in tables
    \item allows for query
    \item Authorization: old by Workspace, new by resource allowing RBAC
    \item Aufbewahrung/Retention: 4 bis maximal 730 Tage
  \end{itemize}
  \vspace*{\stretch{1}}
\end{flashcard}

\begin{flashcard}[Definition]{Azure Sentinel}
  \vspace*{\stretch{1}}
  \begin{itemize}
    \item (logbasierte) automatische Erkennung von Sicherheitszwischenfällen, threat intelligence\newline
      $\Rightarrow$ automatische Antworten
    \item Daten müssen in Log Analytics workspace gespeichert werden
    \item Azure Monitor Logs als Datenquelle
    \item Unterstützte Datne-Provider
      \begin{itemize}
        \item Azure Abonnements
        \item Azure AD
        \item Drittanbieter-Lösungen
      \end{itemize}
  \end{itemize}
  \vspace*{\stretch{1}}
\end{flashcard}

\begin{flashcard}[Definition]{Azure Montior-Integrationen}
  \vspace*{\stretch{1}}
  \begin{itemize}
    \item IT-Service-Management-Connectors
      \begin{itemize}
        \item ServiceNow
        \item System Center Service Manager
      \end{itemize}
    \item basierend auf Alarmen (Metric, Activity Log, Log Anayltics) Aufgaben erzeugen
    \item Synchronisierung mit Log Analytics-Arbeitsbereich
  \end{itemize}
  \vspace*{\stretch{1}}
\end{flashcard}

\subsubsectioncard{recommend appropriate monitoring tool(s) for a solution}

\begin{flashcard}[Definition]{Logging Services}
  \vspace*{\stretch{1}}
  \begin{itemize}
    \item Azure Monitor (zusammenfassender Service)
    \item Application Insights (für Webanwendungen)
    \item VM insights (metriken zur VM-health)
    \item Azure Security Center (Oberfläche zur Cyber-Sicherheit)
    \item Azure Sentinel (überwacht Sicherheitsfeatures, wie Zugriffe)
  \end{itemize}
  \vspace*{\stretch{1}}
\end{flashcard}

\begin{flashcard}[Definition]{Azure-Monitor-Agenten}
  \vspace*{\stretch{1}}
  \begin{itemize}
    \item \emph{Log Analytics Agent}
    \item Installation: VM insights, Log Analytics VM-Erweiterung, im Portal für eine VM, Log Analytics-Arbeitsbereich
    \item Logging von System-Ereignissen in Log Analytics Arbeitsbereich\newline
      $\Rightarrow$ aktivieren in Log-Analytics-Agenten-Konfiguration
    \item Linux: Syslog
    \item Windwos: Ereignislog
    \item IIS-Logs
  \end{itemize}
  \vspace*{\stretch{1}}
\end{flashcard}

\begin{flashcard}[Definition]{Alarme in Azure Monitor}
  \vspace*{\stretch{1}}
  \begin{itemize}
    \item basierend auf Metriken (z.\,B. CPU, Speicher, \ldots)
    \item oder Logs (aus Activity Log), für andere überwachte Werte
    \item Grenzwerte:
      \begin{itemize}
        \item statisch: feste Werte
        \item dynamisch: benutzt historische Daten
      \end{itemize}
  \end{itemize}
  \vspace*{\stretch{1}}
\end{flashcard}

\begin{flashcard}[]{Service Map}
  \vspace*{\stretch{1}}
  \begin{itemize}
    \item automatisches Detektieren von (Web-)Services
    \item benötigt den Log Anayltics Agent (und einen workspace) und Dependency agent
    \item es werden alle Verbindungen zu anderen Rechnern erkannt
    \item Anwendungsfälle:
      \begin{itemize}
        \item Erkennen von Diensten und Verbindungen (auch unerwünschte)
        \item Unterstützung bei Migration
        \item Problemerkennung (fehlerhafte Verbindungen, Miskonfiguration, \ldots)
        \item Hilfe bei Site Recovery (da Abhängigkeiten angezeigt werden)
      \end{itemize}
  \end{itemize}
  \vspace*{\stretch{1}}
\end{flashcard}

\begin{flashcard}[]{Application Insights}
  \vspace*{\stretch{1}}
  \begin{itemize}
    \item Teil von Azure Monitor
    \item Überwachung von von Web-Anwendungen
    \item Performance-Analysen
    \item Erkennung von Problemen
    \item Nutzer-Analysen (User flows, retention, \ldots)
  \end{itemize}
  \vspace*{\stretch{1}}
\end{flashcard}

\begin{flashcard}[]{Monitoring von Datenbanken}
  \vspace*{\stretch{1}}
  Für Azure SQL-Datenbanken, und verwaltete SQL-Instanzen
  \begin{itemize}
    \item Diagnoseeinstellungen aktivieren stellt as \emph{SQLInsights}-Log bereit
    \item Ziele für Logs:
      \begin{itemize}
        \item Log Analytics (SQL Analytics) in jeder Region
        \item Event Hub: weiterleiten an andere Anwendungen (in der gleichen Region)
        \item Azure Speicherkonten (Bobs) (in der gleichen Region)
      \end{itemize}
    \item bis zu 5 Diagnoseeinstellungen können gespeichert werdens
  \end{itemize}
  \vspace*{\stretch{1}}
\end{flashcard}

\subsubsectioncard{choose a mechanism for event routing and escalation}

\begin{flashcard}[Definition]{Benachrichtigungen}
  \vspace*{\stretch{1}}
  \begin{itemize}
    \item Tests in Application Insights (Ping, $\ldots$) verbunden mit einem Alert
    \item Automatische Benachrichtigungen:
    \begin{itemize}
      \item Email
      \item SMS
      \item Runbooks
      \item Webhooks
    \end{itemize}

  \end{itemize}
  \vspace*{\stretch{1}}
\end{flashcard}

\subsubsectioncard{recommend a logging solution for compliance requirements}

\begin{flashcard}[Definition]{Logging Azure AD}
  \vspace*{\stretch{1}}
  \begin{itemize}
    \item Sign-in Logs (nur Nutzer)
    \item Azure audit Logs: \newline
      loggt jede Aktivität in einem Mandanten, Daten, Services, ...
    \item Herunterladen für manuelle Analyse
    \item Speichern der Daten in Log Analytics
    \item Verbinden mit Azure Monitor logs
    \item automatische Analyse (in \emph{Kusto}) über Tabellen- und Suchanfragen
  \end{itemize}
  \vspace*{\stretch{1}}
\end{flashcard}
